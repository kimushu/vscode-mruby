language: c
compiler: gcc

os:
- linux
- osx

env:
  jobs:
  - MRUBY_VERSION=1.4.1
  - MRUBY_VERSION=2.0.1
  - MRUBY_VERSION=2.1.0
  global:
  - secure: "xpNOMMQlTV7XA7iXBtlOQinncjXYHtIDV72/aL5tkSRc62Usu47VasFFPN/u/TPRSkJSjcl+vpZ2HBcZtPXepuKy3o0cel2NgCAvFVkh4bc49K7WhSJxMW4FK/9cThUYfTpejBs2AaSQF8Xh6H6EtYQ6I2pUz8cT2m51JIaxMWOt4txgY69S/ada0FAA0y56ocWI5MeNzQdu6Md2uihQgnagrUYwxG+KGY27j3Agw4KXBjUf2MvV/fHXhhmGSoVEvj0FjAeV6ySnvnuJc5O6XXlOJyCGydZYyNIQ9L9j72bKKCpwWWhvH/Is9tpF1Q/vypaInSjYYtENWMroyJ6NA2d4T0TcB2snPEpTMYkwD301Fi8UEN1VAVNZZSaMyp+TffqS6NMPn5a0N0wy4rcRqD64ZAVidgkK39GuBBBwHZ3yvCiS+s7KEbZVpxE336Fa9E5qoW6ccMkzZpvJcXRBEUdsU5+b0m+1oob6MVqiXe9EUF/IXdzt10CpWoZoX6VvSu/3KJqnApL2Ki8t77M9wrWZMilFwmvqQi+rMg+kklLIEZOMmr829azbihRRMsGnTTOYj3nq+VNAQHKjOusLKeKjZm/+rs7ZOs4p3Co2+o+ocW1EEoWiAzJaUjx3jwHLCX1TP6PSHTNMhl4jlfQdwMV+Jfa772TDDNRcdDVWT6k="
  - secure: "0ZbKFsnJvDU5D4zlWZ4usoUj/1Bgflm4+UNejstdHyZlQmtV4PT+Z6tddtf/aiF/gk00PlHC4iHke+M9JxfemhxfgyqL2mYzzSxrY5isPe17X921OnAlFfW4w4hCZB6de05aqGM9E5P/TPlCgML8EMZZ96N5fR6yDHJmCH1y1KQQNAQ+gThclNyRtw+kgFCgNViiHlLIlG/0S2Iq8flFaVBRY+Q+aD8QR8RAjglsmS0flqFfXSpJAYiLZIWpit26+529P37kJxLkQ/Eyjd4Nz4GkDm6Auzif5KkeQBjyITiy8OlhxL3LaX6tn3Qk5cvWbnrFubwyG3vRyYYupuZB5VNcIOykmGmXG7ZUN8/qOVTzIWbhUiTYQRE5MaiFNjXpUWsMLRzZggld93/OkF1wibXrGtjJv73/oMixt0M3Wc/xiLOtWpXiE83UiIS1w8gk58PlOYYdduTt/2SXgqjeQYYNyTYnU1bLOVxhURli0jxskqgs+77vgtysf9he+vJW+OMdUz33p8HjjNk4joxqYD/UPr8CBMZHTmqurJkvgmUwuJ2EH89MlNAUyObJ7nGg4Bh6wbBw99lf33JPLPkCCYP072rdk7A+WyFMDsgUCPj9eNvcbLZIZpO2FbSQglrvCaXN9UbHZjLZK2smlhvRRm2PeaD9syxLReZNumn9bok="
  - SFTP_USER: uploader
  - SFTP_IDENTITY: id_rsa.uploader
  - SFTP_DEST: /recv
  - secure: "vuKCtpsd1iNladwhCyOxDVoNnidtZhZ0JFikWC6Nv4wTAlnbah1fU+VyrsK7kh0Eb/z+ydhLnL/cNAK9iZXhdKe/yuzjxKzJ62tkY7F8fPdypp6UD6ybRDSC3UMq0ZNutW7BE6MreEXW3Q5B6nRvHIP/gUGwcORrU8wU5g9/DM8pIydvaB+hWgpI9uoPeqrVMWlIXQ+mKvZNAWm32CPmcw8EyocbYB/G3t2ZnXn1/714p6z7kk0vnHWY523AfglKdY90l8YYTRVHcBn4eYNbNAmi0DlLLPnhCFMUCB9l+J1NvxjnNXTEBasLJLHCg7ElWyIr7t/BMslWKEmTnd/FoaAExnCS+GtA9iXKSfpgC0Q+BCnODuL+03/Er5ilnp8TIWrwp8zoyGwVc4lPRfp2WTDvm+8RPy47n4GsTDhOdAY+HULkinHxKpBVXhLTBUhn2tm3EjPgqvcumtLHRr+2xEjs7qKFOpAD87KJZB1bPH+3O+/XT77tOVk/TJ3QI+cLEUQnFVBExpUeKA/oRxNF5Ku87GdN2S8b3JoBH54dZKYr5dUz6oPklTQdVOOfqtRVtVrfTRYKfOlN6rvlLe+GTj0+U8GwSZq+n/Ai7DEU5Jf5lf7W6RiranmLLbosCuJC5FbwiTrgpTykeld/rbxuG2yibruX5JbfLQfQoHhBicw="
  - secure: "DCWkMoQABhAVhoczKLk1yPY/Bw/08uPktKAOGYSbnoWI0rrL5Iw6dnCGmCOeiR3TofTHpNwzpFe3upaY4h++bLYNM6SAZ5tgtGtKz1EyNwf54OsglobVH0YPAdY/WJH7zNvtYmRVjYC1HdwVeNFVptWgkVBgXNRoU7J9iL3Yqkz8N3cdecWvLBU2p4DAHfBoN4NJ3R6RMHvcIDjgJTVdul8NqNf0IrupzUhLSbRFYPfoFtWfDf2QVFlV6qDqvWErg8+gr4bTq4Z9NWKeW6IHA0Iarqtk6601RgLeZmbo9beAp0/9HtwYfgCJtopihYbTTh3d9jg/6VkOe+8jiM60usiCbRR2mXx3wWIFJEixXVQfjUPbepm0nkA/5DQvqVwaB9Vyt51T9z6WhLmEcI3dkPR4kxytH1lrDXSaBSdnTsQNMNV6xKo4+AJvV9jzu2LTkaHv2aVgDxt1g48w4vQbJPWjUL1ED3DgPhGXKkM2VYGo1AY9EiVgKHtJyy9ljPFnUDIC6wQQBK2K+J2wBrCVTXTlDs66sS00Td9W1RD/RNWnCXmkYWQouwc4KZrQuGwzSfWYgjnkQvXFEeIdJsju/6PvSbExP0IIPRfhNyx+yfmPY4Br106hHipXP7hYzLy9jsPuxlBc7IKKY1c8E0KzfalQA3OC+h65e811A3i58ow="

cache:
  npm: true

addons:
  apt:
    packages:
    - gcc-multilib
    - lib32readline-dev
    - lib32ncurses5-dev

before_script:
- openssl enc -aes-256-cbc -in $SFTP_IDENTITY.enc -out $SFTP_IDENTITY -d -K $ENC_KEY -iv $ENC_IV
- chmod 600 $SFTP_IDENTITY

script:
- npm run deploy
